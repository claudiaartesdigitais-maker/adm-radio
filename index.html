<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>R√°dio e TV Nova Cotia</title>
    <style>
        :root { --primary-color: #004a99; --bg-color: #f0f2f5; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: var(--bg-color); margin: 0; padding: 0; }
        
        header { background: var(--primary-color); color: white; padding: 20px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.2); }
        
        .feed-title { text-align: center; color: var(--primary-color); margin-top: 30px; font-size: 1.2em; text-transform: uppercase; letter-spacing: 1px; }
        
        /* Estilo Feed de Not√≠cias */
        .feed-container { display: flex; flex-direction: column; align-items: center; gap: 20px; padding: 20px; max-width: 600px; margin: 0 auto; }
        .noticia-card { background: #fff; width: 100%; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); text-decoration: none; color: #333; transition: 0.3s; }
        .noticia-thumb { width: 100%; aspect-ratio: 16/9; object-fit: cover; border-bottom: 1px solid #eee; }
        .noticia-corpo { padding: 15px; }
        .noticia-tipo { font-size: 10px; font-weight: bold; color: var(--primary-color); text-transform: uppercase; display: block; margin-bottom: 5px; }
        .noticia-titulo { font-size: 18px; margin: 0; line-height: 1.3; font-weight: 600; }
        .noticia-hora { font-size: 11px; color: #999; margin-top: 10px; display: block; }
    </style>
</head>
<body>

    <header>
        <h1 style="margin:0; font-size: 1.5em;">R√°dio e TV Nova Cotia</h1>
        <p style="margin:5px 0 0 0; opacity: 0.9; font-size: 0.9em;">Ao Vivo da Nossa Cidade</p>
    </header>

    <h2 class="feed-title">√öltimas do Dia</h2>
    
    <div id="noticias-lista" class="feed-container">
        <p>A carregar feed...</p>
    </div>

    <script>
        async function carregarFeed() {
            // URL DA SUA PLANILHA (Script do Google)
            const url = "https://script.google.com/macros/s/AKfycbxaiOSoeAhlBHnmVqLIeH61uoJdHCJJK2wFKmw16Bh0YZRG-NgqpWFaA3Ytlyprs4Q9/exec";
            const imgMural = "https://raw.githubusercontent.com/claudiaartesdigitais-maker/adm-radio/main/mural.png";

            try {
                const response = await fetch(url);
                const dados = await response.json();
                const container = document.getElementById('noticias-lista');
                
                const agora = new Date();
                const vinteQuatroHoras = 24 * 60 * 60 * 1000;

                const noticiasFiltradas = dados.filter(item => {
                    const dataPostagem = new Date(item.data);
                    return (agora - dataPostagem) < vinteQuatroHoras;
                });

                if (noticiasFiltradas.length === 0) {
                    container.innerHTML = "<p style='color:#777;'>Sem novidades nas √∫ltimas 24h.</p>";
                    return;
                }

                container.innerHTML = "";

                noticiasFiltradas.forEach(item => {
                    const link = (item.link || "").trim();
                    let imagem = "https://via.placeholder.com/400x225/004a99/ffffff?text=Nova+Cotia";
                    
                    if(item.tipo === "VIDEO") {
                        let idVideo = link.includes('v=') ? link.split('v=')[1].split('&')[0] : link.split('/').pop();
                        imagem = `https://img.youtube.com/vi/${idVideo}/mqdefault.jpg`;
                    } else if (item.imagem_personalizada) {
                        imagem = item.imagem_personalizada;
                    }

                    container.innerHTML += `
                        <a href="${link}" target="_blank" class="noticia-card">
                            <img src="${imagem}" class="noticia-thumb" onerror="this.src='${imgMural}'">
                            <div class="noticia-corpo">
                                <span class="noticia-tipo">${item.tipo === 'VIDEO' ? '‚ñ∂ V√çDEO' : 'üì∞ NOT√çCIA'}</span>
                                <h3 class="noticia-titulo">${item.titulo}</h3>
                                <span class="noticia-hora">Publicado h√° menos de 24h</span>
                            </div>
                        </a>`;
                });
            } catch (e) {
                document.getElementById('noticias-lista').innerHTML = "<p>Erro ao carregar feed.</p>";
            }
        }
        window.onload = carregarFeed;
    </script>
</body>
</html>
